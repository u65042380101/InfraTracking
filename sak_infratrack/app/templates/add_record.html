{% extends "base.html" %}

{% block title %}‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Helpdesk Record{% endblock %}

{% block content %}
<div class="max-w-3xl mx-auto py-12 px-6">
  <h2 class="text-3xl font-bold text-center text-blue-700 mb-8">üìã ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Helpdesk Record</h2>


  <form method="post" class="bg-white p-8 rounded-2xl shadow-lg border border-gray-200 space-y-6">
    {% csrf_token %}

    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <div>
        <label class="block text-gray-700 font-semibold mb-1">‡∏£‡∏´‡∏±‡∏™‡∏™‡∏≤‡∏Ç‡∏≤</label>
        {{ form.branch_code }}
      </div>
      <div>
        <label class="block text-gray-700 font-semibold mb-1">‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏≤‡∏Ç‡∏≤</label>
        {{ form.branch_name }}
      </div>
      <div>
        <label class="block text-gray-700 font-semibold mb-1">‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå</label>
        {{ form.device }}
      </div>
      <div>
        <label class="block text-gray-700 font-semibold mb-1">‡∏ú‡∏π‡πâ‡πÉ‡∏´‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£</label>
        {{ form.provider }}
      </div>
      <div class="md:col-span-2">
        <label class="block text-gray-700 font-semibold mb-1">‡∏õ‡∏±‡∏ç‡∏´‡∏≤</label>
        {{ form.problem }}
      </div>
      <div class="md:col-span-2">
        <label class="block text-gray-700 font-semibold mb-1">‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</label>
        {{ form.solution }}
      </div>
      <div>
        <label class="block text-gray-700 font-semibold mb-1">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</label>
        {{ form.date }}
      </div>
      <div>
        <label class="block text-gray-700 font-semibold mb-1">‡∏ú‡∏π‡πâ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</label>
        {{ form.by }}
      </div>
      <div>
        <label class="block text-gray-700 font-semibold mb-1">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</label>
        {{ form.status }}
      </div>
    </div>

    <div class="pt-8 text-center">
      <button type="submit" class="inline-flex items-center bg-blue-600 hover:bg-blue-700 text-white font-semibold px-6 py-2 rounded-lg shadow transition duration-150">
        üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
      </button>
    </div>
  </form>
</div>

<script>
document.addEventListener("DOMContentLoaded", function() {
  const branchCodeInput = document.getElementById("id_branch_code");
  const branchNameInput = document.getElementById("id_branch_name");
  const providerInput = document.getElementById("id_provider");
  branchCodeInput.addEventListener("change", function() {
    fetch(`/api/branch-info/?branch_code=${branchCodeInput.value}`)
      .then(response => response.json())
      .then(data => {
        if (data.branch_name) {
          branchNameInput.value = data.branch_name;
        }
        if (data.provider) {
          providerInput.value = data.provider;
        }
      });
  });
});
</script>
{% endblock %}
